100만 동시접속 실시간 시청자수 시스템
비즈니스 요구사항 및 가정

🎯 핵심 비즈니스 요구사항
서비스 정의
📺 서비스 유형: 라이브 스트리밍 플랫폼 (아프리카TV, 트위치 류)
👥 핵심 기능: 각 방송의 실시간 시청자수 표시
🇰🇷 서비스 지역: 국내 한정 (한국 사용자 대상)
⏰ 운영 시간: 24시간 무중단 서비스
시청자수 정의 (가장 중요)
🎯 시청자수 = 현재 방송을 시청 중인 실시간 동시접속자 수

✅ 카운팅 규칙:
- 방송 입장 시: 시청자수 +1 (즉시 반영)
- 방송 퇴장 시: 시청자수 -1 (즉시 반영)
- 브라우저 새로고침: 시청자수 변화 없음 (연결 유지)
- 네트워크 끊김: 시청자수 -1 (30-60초 내 감지)
- 동일 사용자 재입장: 시청자수 +1 (중복 방지 없음)

📊 트래픽 패턴 가정
핵심 수치 (전체 플랫폼 기준)
👥 100만 동시접속 = 모든 방송 시청자 합계

📈 전체 시스템 TPS:
- 평상시: 초당 1,100건 (입/퇴장 합계)
- 피크타임: 초당 6,600건 (저녁 골든타임)
- 극한상황: 초당 11,000건 (인기 방송 이벤트)

🎯 방송 분포:
- 대형 방송: 15개 (전체 트래픽의 70%)
- 중형 방송: 100개 (전체 트래픽의 25%)  
- 소형 방송: 500개+ (전체 트래픽의 5%)
📊 TPS 산정 근거
💡 기본 가정:
- 평균 시청 시간: 15분 (일반적인 라이브 스트리밍 패턴)
- 시간당 사용자 회전율: 4회 (15분 × 4 = 60분)
- 100만 동시접속 → 시간당 800만 입/퇴장 발생

📈 계산 과정:
평상시 (50만 동시접속):
- 시간당 입/퇴장: 50만 × 4 × 2 = 400만건
- 초당 입/퇴장: 400만 ÷ 3,600초 = 1,111건
- 반올림: 1,100건

피크타임 (100만 동시접속):
- 시간당 입/퇴장: 100만 × 4 × 2 = 800만건  
- 초당 입/퇴장: 800만 ÷ 3,600초 = 2,222건
- 트래픽 집중 현상: 3배 증폭 = 6,600건

극한상황:
- 인기 방송 시작/종료 시 순간 폭증
- 피크타임 대비 1.7배 = 11,000건 (5-10분간)


💡 면접에서 활용하는 방법
1. 간단 버전 (30초)
"평균 시청시간 15분 기준으로, 100만 동시접속 시 시간당 800만번의 입/퇴장이 발생합니다. 이를 초당으로 환산하면 기본 2,222건인데, 트래픽 집중 현상을 고려해서 피크타임 6,600건으로 설계했습니다."

2. 상세 버전 (면접관이 세부사항 물어볼 때)
"15분 평균 시청시간은 라이브 스트리밍 플랫폼의 일반적 패턴입니다. 100만 동시접속이라면 시간당 4번 회전하므로 800만건의 입/퇴장이 발생하죠. 하지만 실제로는 인기 방송에 트래픽이 몰리는 현상이 있어서 3배 여유분을 둬서 6,600 TPS로 설계했습니다."